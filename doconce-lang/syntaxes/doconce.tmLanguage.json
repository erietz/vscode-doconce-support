{
	"comment" : "https://macromates.com/manual/en/language_grammars#naming-conventions",
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "doconce",
	"patterns": [
		{
			"include": "#keywords"
		},
		{
			"include": "#strings"
		},
		{
			"include": "text.html.markdown"
		}
	],
	"repository": {
		"keywords": {
			"patterns": [
			{
				"name": "keyword",
				"begin": "(!bc\\s*)",
				"end": "(!ec)",
				"beginCaptures" : {"1":{"name": "entity.name.tag.codeblock"}},
				"endCaptures" : {"1":{"name": "entity.name.tag.codeblock"}},

				"patterns": [
					{
						"name": "source.python",
						"begin": "(pycod|pyprog)",
						"end": "(?=!ec)",
						"beginCaptures" : {"1":{"name": "entity.name.keyword"}, "2": {"name":"keyword"}},
						"patterns": [
						{
							"include": "source.python"
						}
						]		
					}
				]

			},
			
			{
				"name": "markup.heading",
				"match" : "={3,9}\\s+\\S+\\s+={3,9}"
			},

			{
				"name": "keyword",
				"begin": "(!bt\\s*)",
				"end": "(!et)",
				"beginCaptures" : {"1":{"name": "entity.name.tag.codeblock"}},
				"endCaptures" : {"1":{"name": "entity.name.tag.codeblock"}},
				"patterns": [
					{
						"include": "text.tex.latex"
					}
				]

			}

			]
		},
		"strings": {
			"name": "string.quoted.double.doconce",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.doconce",
					"match": "\\\\."
				}
			]
		}
	},
	"scopeName": "source.doconce"
}